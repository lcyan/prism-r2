# Prism R2 - é«˜çº§ Cloudflare R2 å¯¹è±¡å­˜å‚¨ç®¡ç†é¢æ¿

Prism R2 æ˜¯ä¸€ä¸ªç°ä»£ã€ç¾è§‚ä¸”å®‰å…¨çš„ Cloudflare R2 å¯¹è±¡å­˜å‚¨ç®¡ç†ä»ªè¡¨ç›˜ã€‚åŸºäº Reactã€Vite å’Œ TailwindCSS æ„å»ºï¼Œä¸“ä¸º Cloudflare Pages çš„å³æ—¶éƒ¨ç½²è€Œè®¾è®¡ã€‚

[English README](README.md)

## âœ¨ ä¸»è¦ç‰¹æ€§

- **ğŸ¨ é«˜çº§ UI è®¾è®¡**: é‡‡ç”¨ç»ç’ƒæ‹Ÿæ€ï¼ˆGlassmorphismï¼‰è®¾è®¡ï¼Œæ‹¥æœ‰æµç•…çš„åŠ¨ç”»å’Œå®Œç¾çš„å“åº”å¼å¸ƒå±€ã€‚
- **ğŸš€ æ™ºèƒ½ä¸Šä¼ **: æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œå¹¶æä¾› **WebP è‡ªåŠ¨è½¬æ¢** é€‰é¡¹ï¼Œä¼˜åŒ–å›¾ç‰‡ä½“ç§¯ã€‚
- **ğŸ“‚ æ–‡ä»¶ç®¡ç†**: æ”¯æŒç½‘æ ¼/åˆ—è¡¨è§†å›¾åˆ‡æ¢ã€æœç´¢è¿‡æ»¤ã€ç›®å½•å¯¼èˆªä»¥åŠæ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ï¼‰ã€‚
- **ğŸ”— å¿«æ·æ“ä½œ**: ä¸€é”®å¤åˆ¶ URLã€Markdownã€HTML å’Œ BBCode æ ¼å¼é“¾æ¥ã€‚
- **â˜ï¸ äº‘ç«¯é…ç½®åŒæ­¥**: æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è‡ªåŠ¨åŠ è½½å¤šä¸ªå­˜å‚¨æ¡¶é…ç½®ï¼Œå®ç°å…é…ç½®ç™»å½•ã€‚
- **ğŸ”’ å®‰å…¨éšç§**: æ ¸å¿ƒé€»è¾‘å®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œä¸ç»ç”±ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ä¸­è½¬å¯†é’¥ã€‚

## ğŸ› ï¸ æœ¬åœ°å¼€å‘

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²åˆ° Cloudflare Pages
1. å°†æ­¤ä»£ç æ¨é€åˆ°æ‚¨çš„ GitHub ä»“åº“ã€‚
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com) > **Workers & Pages**ã€‚
3. ç‚¹å‡» **Create Application** > **Connect to Git** > é€‰æ‹©æ‚¨çš„ä»“åº“ã€‚
4. é…ç½®æ„å»ºè®¾ç½® (Build Settings):
   - **Framework Preset**: Vite
   - **Build command**: `npm run build`
   - **Build output directory**: `dist`
5. ç‚¹å‡» **Save and Deploy**ã€‚

### ç¬¬äºŒæ­¥ï¼šé…ç½® CORS (è‡³å…³é‡è¦ âš ï¸)
ç”±äº Prism R2 æ˜¯çº¯å‰ç«¯åº”ç”¨ï¼Œæ‚¨**å¿…é¡»**åœ¨ R2 å­˜å‚¨æ¡¶è®¾ç½®ä¸­é…ç½®è·¨åŸŸèµ„æºå…±äº« (CORS) ç­–ç•¥ï¼Œå…è®¸æ‚¨çš„ Pages åŸŸåè®¿é—®ã€‚

è¿›å…¥ **R2** > **æ‚¨çš„å­˜å‚¨æ¡¶** > **Settings** > **CORS Policy**ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
[
  {
    "AllowedOrigins": [
      "http://localhost:5174",
      "https://æ‚¨çš„é¡¹ç›®å.pages.dev",
      "https://æ‚¨çš„è‡ªå®šä¹‰åŸŸå.com"
    ],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE", "HEAD"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": ["ETag", "Content-Length"],
    "MaxAgeSeconds": 3600
  }
]
```

### ç¬¬ä¸‰æ­¥ï¼š(å¯é€‰) é€šè¿‡ç¯å¢ƒå˜é‡é¢„åŠ è½½é…ç½®
æ‚¨å¯ä»¥ä½¿ç”¨ Cloudflare Pages çš„ç¯å¢ƒå˜é‡æ¥å­˜å‚¨æ‚¨çš„å­˜å‚¨æ¡¶å‡­è¯ï¼Œè¿™æ ·å½“æ‚¨æ‰“å¼€ä»ªè¡¨ç›˜æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½è¿™äº›é…ç½®ï¼ˆå®ç°â€œå…é…ç½®â€è®¿é—®ä½“éªŒï¼‰ã€‚

1. **é…ç½®ç¯å¢ƒå˜é‡**:
   - è¿›å…¥æ‚¨çš„ Pages é¡¹ç›® > **Settings** > **Environment variables**ã€‚
   - ç‚¹å‡» **Add variables**ã€‚
   - **Variable name (å˜é‡å)**: `R2_CONFIGS`ã€‚
   - **Value (å€¼)**: ä¸€ä¸ªåŒ…å«æ‚¨å­˜å‚¨æ¡¶é…ç½®çš„ JSON æ•°ç»„å­—ç¬¦ä¸²ï¼ˆå‚è§ä¸‹æ–¹æ ¼å¼ï¼‰ã€‚
   - **é‡æ–°éƒ¨ç½²** æ‚¨çš„é¡¹ç›®ä»¥ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚

#### `R2_CONFIGS` JSON æ ¼å¼ç¤ºä¾‹
```json
[
  {
    "id": "1",
    "name": "å…¬å¼€é™æ€èµ„æº",
    "accountId": "f123456789...",
    "accessKeyId": "YOUR_ACCESS_KEY_ID",
    "secretAccessKey": "YOUR_SECRET_ACCESS_KEY",
    "bucketName": "my-bucket-name",
    "customDomain": "https://cdn.example.com",
    "endpoint": "https://<accountid>.r2.cloudflarestorage.com",
    "isDefault": true
  }
]
```

> âš ï¸ **å®‰å…¨è­¦å‘Š**: å¦‚æœæ‚¨ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨äº† accessKeyId å’Œ secretAccessKeyï¼Œä»»ä½•æ‹¥æœ‰æ‚¨ç½‘ç«™è®¿é—®æƒé™çš„äººéƒ½å¯ä»¥åŠ è½½è¿™äº›å‡­è¯ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ **GitHub OAuth è®¤è¯** (å·²å†…ç½®) æˆ– **Cloudflare Access (Zero Trust)** æ¥ä¿æŠ¤æ‚¨çš„ Prism R2 ä»ªè¡¨ç›˜ï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·å¯ä»¥è®¿é—®è¯¥ç«™ç‚¹ã€‚

## ğŸ“„ å¼€æºåè®®
MIT
